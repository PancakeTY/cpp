set(FAASM_USER stream)
function(stream_func exec_name dir_path)
    faasm_func(${exec_name} ${dir_path})
    set(ALL_STREAM_FUNCS ${ALL_STREAM_FUNCS} ${exec_name} PARENT_SCOPE)
endfunction(stream_func)
stream_func(chained_a chained_a.cpp)
stream_func(chained_b chained_b.cpp)
stream_func(chained_c chained_c.cpp)
stream_func(chained_d chained_d.cpp)
stream_func(wc_random_source wc_random_source.cpp)
stream_func(wc_split wc_split.cpp)
stream_func(wc_count wc_count.cpp)
stream_func(function_state function_state.cpp)
stream_func(function_parstate function_parstate.cpp)
stream_func(function_parstate_source function_parstate_source.cpp)
stream_func(batch_echo batch_echo.cpp)
stream_func(wordcount_source wordcount_source.cpp)
stream_func(wordcount_split wordcount_split.cpp)
stream_func(wordcount_count wordcount_count.cpp)

# Custom target to group all the stream functions
add_custom_target(stream_all_funcs DEPENDS ${ALL_STREAM_FUNCS})
# Turn on WASM profiling
add_definitions(-DWASM_PROF=1)